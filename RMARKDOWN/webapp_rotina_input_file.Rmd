---
title: "webapp"
author: "Ewerson Pimenta"
date: "5/16/2019"
output: html_document
---

```{r}
inFile <- input$file
inFile <- as.data.frame(cbind(DB$Protocolo[615:624], DB$PEDIDO[615:624]))

## Renomeia colunas da tabela inputada
colnames(inFile) <- c("Protocolo", "DESCRI_PEDIDO")

## Todos os caracteres minúsculos
inFile$DESCRI_PEDIDO <- as.character(tolower(inFile$DESCRI_PEDIDO))

## Remoção de stopwords (etapa 1)
stopwords_pt = c("a",
                 "à",
                 "acerca",
                 "acesso",
                 "adeus",
                 "agora",
                 "agradeço",
                 "agradeco",
                 "aí",
                 "ai",
                 "ainda",
                 "alem",
                 "além",
                 "algmas",
                 "algo",
                 "algumas",
                 "alguns",
                 "ali",
                 "ambas",
                 "ambos",
                 "ano",
                 "anos",
                 "antes",
                 "ao",
                 "aonde",
                 "aos",
                 "apenas",
                 "apoio",
                 "apontar",
                 "apos",
                 "após",
                 "aquela",
                 "aquelas",
                 "aquele",
                 "aqueles",
                 "aqui",
                 "aquilo",
                 "área",
                 "arquivo",
                 "as",
                 "às",
                 "assim",
                 "até",
                 "ate",
                 "atrás",
                 "atras",
                 "através",
                 "atraves",
                 "b",
                 "baixo",
                 "bastante",
                 "bem",
                 "boa",
                 "boas",
                 "bom",
                 "bons",
                 "brasil",
                 "breve",
                 "c",
                 "cá",
                 "ca",
                 "cada",
                 "caminho",
                 "caso",
                 "catorze",
                 "cedo",
                 "cento",
                 "certamente",
                 "certeza",
                 "cima",
                 "cinco",
                 "coisa",
                 "com",
                 "como",
                 "comprido",
                 "conforme",
                 "conhecido",
                 "conselho",
                 "contra",
                 "contudo",
                 "corrente",
                 "cuja",
                 "cujas",
                 "cujo",
                 "cujos",
                 "custa",
                 "d",
                 "da",
                 "dá",
                 "dado",
                 "dados",
                 "dão",
                 "dao",
                 "daquela",
                 "daquelas",
                 "daquele",
                 "daqueles",
                 "dar",
                 "das",
                 "de",
                 "debaixo",
                 "dela",
                 "delas",
                 "dele",
                 "deles",
                 "demais",
                 "dentro",
                 "depois",
                 "desde",
                 "desligado",
                 "dessa",
                 "dessas",
                 "desse",
                 "desses",
                 "desta",
                 "destas",
                 "deste",
                 "destes",
                 "deve",
                 "devem",
                 "deverá",
                 "dez",
                 "dezanove",
                 "dezasseis",
                 "dezassete",
                 "dezoito",
                 "dia",
                 "diante",
                 "direita",
                 "dispoe",
                 "dispoem",
                 "dissertação",
                 "dissertacao",
                 "diversa",
                 "diversas",
                 "diversos",
                 "diz",
                 "dizem",
                 "dizer",
                 "do",
                 "dois",
                 "dos",
                 "doutorado",
                 "download",
                 "doze",
                 "duas",
                 "durante",
                 "dúvida",
                 "duvida",
                 "e",
                 "é",
                 "ela",
                 "elas",
                 "ele",
                 "eles",
                 "em",
                 "embora",
                 "empresario",
                 "empresário",
                 "energia",
                 "energias",
                 "enquanto",
                 "entao",
                 "então",
                 "entre",
                 "enviar",
                 "envio",
                 "epe",
                 "era",
                 "eram",
                 "éramos",
                 "eramos",
                 "és",
                 "es",
                 "essa",
                 "essas",
                 "esse",
                 "esses",
                 "esta",
                 "está",
                 "estado",
                 "estamos",
                 "estão",
                 "estao",
                 "estar",
                 "estará",
                 "estara",
                 "estas",
                 "estás",
                 "estas",
                 "estava",
                 "estavam",
                 "estávamos",
                 "estavamos",
                 "este",
                 "esteja",
                 "estejam",
                 "estejamos",
                 "estes",
                 "esteve",
                 "estive",
                 "estivemos",
                 "estiver",
                 "estivera",
                 "estiveram",
                 "estivéramos",
                 "estiveramos",
                 "estiverem",
                 "estivermos",
                 "estivesse",
                 "estivessem",
                 "estivéssemos",
                 "estivessemos",
                 "estiveste",
                 "estivestes",
                 "estou",
                 "estudante",
                 "eu",
                 "exemplo",
                 "explica",
                 "explicação",
                 "explicado",
                 "f",
                 "faço",
                 "faco",
                 "falta",
                 "fará",
                 "fara",
                 "favor",
                 "faz",
                 "fazeis",
                 "fazem",
                 "fazemos",
                 "fazer",
                 "fazes",
                 "fazia",
                 "fez",
                 "fim",
                 "final",
                 "foi",
                 "fomos",
                 "for",
                 "fora",
                 "foram",
                 "fôramos",
                 "foramos",
                 "forem",
                 "forma",
                 "formato",
                 "formos",
                 "fosse",
                 "fossem",
                 "fôssemos",
                 "fossemos",
                 "foste",
                 "fostes",
                 "fui",
                 "g",
                 "geral",
                 "gostar",
                 "gostaria",
                 "gostaríamos",
                 "gostariamos",
                 "gosto",
                 "grande",
                 "grandes",
                 "grato",
                 "grata",
                 "grupo",
                 "h",
                 "ha",
                 "há",
                 "haja",
                 "hajam",
                 "hajamos",
                 "hão",
                 "hao",
                 "havemos",
                 "havia",
                 "hei",
                 "hoje",
                 "hora",
                 "horas",
                 "houve",
                 "houvemos",
                 "houver",
                 "houvera",
                 "houverá",
                 "houveram",
                 "houvéramos",
                 "houveramos",
                 "houverão",
                 "houverao",
                 "houverei",
                 "houverem",
                 "houveremos",
                 "houveria",
                 "houveriam",
                 "houveríamos",
                 "houveriamos",
                 "houvermos",
                 "houvesse",
                 "houvessem",
                 "houvéssemos",
                 "houvessemos",
                 "i",
                 "informação",
                 "informacao",
                 "informações",
                 "informacoes",
                 "iniciar",
                 "inicio",
                 "ir",
                 "irá",
                 "ira",
                 "isso",
                 "ista",
                 "iste",
                 "isto",
                 "j",
                 "já",
                 "ja",
                 "k",
                 "lá",
                 "la",
                 "l",
                 "lado",
                 "lhe",
                 "lhes",
                 "ligado",
                 "local",
                 "logo",
                 "longe",
                 "lugar",
                 "m",
                 "maior",
                 "maioria",
                 "maiorias",
                 "mais",
                 "mal",
                 "mas",
                 "máximo",
                 "maximo",
                 "me",
                 "mediante",
                 "meio",
                 "menor",
                 "menos",
                 "mês",
                 "mes",
                 "mestre",
                 "mestrado",
                 "ano",
                 "meses",
                 "mesma",
                 "mesmas",
                 "mesmo",
                 "mesmos",
                 "meu",
                 "meus",
                 "mil",
                 "minha",
                 "minhas",
                 "momento",
                 "muito",
                 "muitos",
                 "n",
                 "na",
                 "nada",
                 "nao",
                 "não",
                 "naquela",
                 "naquelas",
                 "naquele",
                 "naqueles",
                 "nas",
                 "nem",
                 "nenhuma",
                 "nessa",
                 "nessas",
                 "nesse",
                 "nesses",
                 "nesta",
                 "nestas",
                 "neste",
                 "nestes",
                 "nível",
                 "nivel",
                 "no",
                 "noite",
                 "nome",
                 "nos",
                 "nós",
                 "nossa",
                 "nossas",
                 "nosso",
                 "nossos",
                 "nova",
                 "novas",
                 "nove",
                 "novo",
                 "novos",
                 "num",
                 "numa",
                 "numas",
                 "número",
                 "numero",
                 "nunca",
                 "nuns",
                 "o",
                 "obra",
                 "obrigada",
                 "obrigado",
                 "oitava",
                 "oitavo",
                 "oito",
                 "onde",
                 "ontem",
                 "onze",
                 "os",
                 "ou",
                 "outra",
                 "outras",
                 "outro",
                 "outros",
                 "p",
                 "para",
                 "parece",
                 "parte",
                 "partir",
                 "paucas",
                 "pegar",
                 "pela",
                 "pelas",
                 "pelo",
                 "pelos",
                 "perante",
                 "pergunta",
                 "pergunto",
                 "perto",
                 "pessoas",
                 "pode",
                 "pôde",
                 "podem",
                 "poder",
                 "poderá",
                 "podera",
                 "poderia",
                 "podia",
                 "põe",
                 "poe",
                 "põem",
                 "poem",
                 "pois",
                 "ponto",
                 "pontos",
                 "por",
                 "porque",
                 "porquê",
                 "portanto",
                 "posição",
                 "posicao",
                 "possa",
                 "possamos",
                 "possibilidade",
                 "possível",
                 "possivel",
                 "possivelmente",
                 "posso",
                 "pouca",
                 "pouco",
                 "poucos",
                 "povo",
                 "prezados",
                 "primeira",
                 "primeiras",
                 "primeiro",
                 "primeiros",
                 "promeiro",
                 "propios",
                 "própria",
                 "propria",
                 "próprias",
                 "proprias",
                 "proprio",
                 "próprio",
                 "próprios",
                 "proprios",
                 "próxima",
                 "proxima",
                 "próximas",
                 "proximas",
                 "próximo",
                 "proximo",
                 "próximos",
                 "proximos",
                 "puderam",
                 "q",
                 "quais",
                 "quáis",
                 "qual",
                 "qualquer",
                 "quando",
                 "quanto",
                 "quarta",
                 "quarto",
                 "quatro",
                 "que",
                 "quê",
                 "quem",
                 "quer",
                 "quereis",
                 "querem",
                 "queremas",
                 "queres",
                 "quero",
                 "questão",
                 "questao",
                 "quieto",
                 "quinta",
                 "quinto",
                 "quinze",
                 "r",
                 "relação",
                 "relacao",
                 "requeiro",
                 "requerimento",
                 "s",
                 "sabe",
                 "sabem",
                 "saber",
                 "são",
                 "sao",
                 "se",
                 "segunda",
                 "segundo",
                 "sei",
                 "seis",
                 "seja",
                 "sejam",
                 "sejamos",
                 "sem",
                 "sempre",
                 "sendo",
                 "ser",
                 "será",
                 "sera",
                 "serão",
                 "serao",
                 "serei",
                 "seremos",
                 "seria",
                 "seriam",
                 "seríamos",
                 "sete",
                 "sétima",
                 "setima",
                 "sétimo",
                 "setimo",
                 "seu",
                 "seus",
                 "sexta",
                 "sexto",
                 "sim",
                 "sistema",
                 "só",
                 "so",
                 "sob",
                 "sobre",
                 "sois",
                 "solicitacao",
                 "solicitação",
                 "solicitacoes",
                 "solicitações",
                 "solicitado",
                 "solicitados",
                 "solicitalos",
                 "solicitamos",
                 "solicitante",
                 "solicitar",
                 "solicitaria",
                 "solicitase",
                 "solicitei",
                 "solicito",
                 "somente",
                 "somos",
                 "sou",
                 "sua",
                 "suas",
                 "t",
                 "tal",
                 "talvez",
                 "tambem",
                 "também",
                 "tanta",
                 "tantas",
                 "tanto",
                 "tão",
                 "tao",
                 "tarde",
                 "te",
                 "tem",
                 "tém",
                 "têm",
                 "temos",
                 "tempo",
                 "tendes",
                 "tenha",
                 "tenham",
                 "tenhamos",
                 "tenho",
                 "tens",
                 "tentar",
                 "tentaram",
                 "tente",
                 "tentei",
                 "ter",
                 "terá",
                 "tera",
                 "terão",
                 "terao",
                 "terceira",
                 "terceiro",
                 "terei",
                 "teremos",
                 "teria",
                 "teriam",
                 "teríamos",
                 "teriamos",
                 "teu",
                 "teus",
                 "teve",
                 "tinha",
                 "tinham",
                 "tínhamos",
                 "tinhamos",
                 "tipo",
                 "tive",
                 "tivemos",
                 "tiver",
                 "tivera",
                 "tiveram",
                 "tivéramos",
                 "tiveramos",
                 "tiverem",
                 "tivermos",
                 "tivesse",
                 "tivessem",
                 "tivéssemos",
                 "tivessemos",
                 "tiveste",
                 "tivestes",
                 "toda",
                 "todas",
                 "todo",
                 "todos",
                 "trabalhar",
                 "trabalho",
                 "três",
                 "tres",
                 "treze",
                 "tu",
                 "tua",
                 "tuas",
                 "tudo",
                 "u",
                 "último",
                 "ultimo",
                 "um",
                 "uma",
                 "umas",
                 "uns",
                 "usa",
                 "usar",
                 "v",
                 "vai",
                 "vais",
                 "valor",
                 "vão",
                 "vao",
                 "vários",
                 "varios",
                 "veja",
                 "vem",
                 "vêm",
                 "venho",
                 "vens",
                 "ver",
                 "verdade",
                 "verdadeiro",
                 "vez",
                 "vezes",
                 "viagem",
                 "vindo",
                 "vinte",
                 "você",
                 "voce",
                 "vocês",
                 "voces",
                 "vos",
                 "vós",
                 "vossa",
                 "vossas",
                 "vosso",
                 "vossos",
                 "w",
                 "x",
                 "y",
                 "z",
                 "zero",
                 "um",
                 "dois",
                 "três",
                 "tres",
                 "quatro",
                 "cinco",
                 "seis",
                 "sete",
                 "oito",
                 "nove",
                 "dez",
                 "0",
                 "1",
                 "2",
                 "3",
                 "4",
                 "5",
                 "6",
                 "7",
                 "8",
                 "9",
                 "id",
                 "in",
                 "45",
                 "2010",
                 "1940")
mystopwords <- data_frame(palavra = stopwords_pt)

j=i=0; inFile$PEDIDO=inFile$DESCRI_PEDIDO
for (j in 1:length(inFile$PEDIDO)) {
  for(i in 1:dim(mystopwords)[1]){
    stopw = as.character(mystopwords[i,1])
    inFile$PEDIDO[j] = gsub(paste0("\\ ",stopw," "), " ", as.character(inFile$PEDIDO[j]))
  }
}

#inFile$DESCRI_PEDIDO[8]
#inFile$PEDIDO[8]

## REMOVE CARACTERES
inFile$PEDIDO = gsub("-","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:.:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:,:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:':]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:!:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:?:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:-:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:__:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:;:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:/:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:(:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:):]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:%:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:º:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:°:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:ª:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("\\d+","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[0-9]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:\n\t:]"," ",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:\t:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("[:\n:]","",inFile$PEDIDO)
inFile$PEDIDO = gsub("\\s+"," ",inFile$PEDIDO)
inFile$PEDIDO = gsub("\"","",inFile$PEDIDO)

### STEMMINGS
inFile$PEDIDO = ptstem(rslp(inFile$PEDIDO), complete = TRUE)
inFile$PEDIDO = gsub("\\s+"," ",inFile$PEDIDO)

### Stopwords
mystopwords <- data_frame(palavra = stopwords_pt)
diretoria_palavras_noSTOP <- anti_join(diretoria_palavras_stem3, mystopwords, 
                                       by = "palavra")
#OU

mystopwords <- data_frame(palavra = stopwords_pt)
for (j in 1:dim(DB)[1]) {
  for(i in 1:dim(mystopwords)[1]){
  stopw = as.character(mystopwords[i,1])
  DB$PEDIDO1[j] = gsub(paste0("\\ ",stopw," "), " ", as.character(DB$PEDIDO1[j]))
}
}
```

```yaml
### PALAVRAS
inFile$PEDIDO =tolower(inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Leiloes)", "leilao", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Leiloar)", "leilao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(leiloes)", "leilao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(leiloar)", "leilao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(leiloes)", "leilao", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Energetica)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energetica)", "eletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Eletricas)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(eletricas)", "eletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Eletricos)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(eletricos)", "eletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Eletrico)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(eletrico)", "eletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Eletricidade)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(eletricidade)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energetica)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energeticas)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energetico)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energeticos)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energia)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energias)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energy)", "eletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(energies)", "eletrica", inFile$PEDIDO)
x#inFile$PEDIDO =gsub("\\b(Termoeletricas)", "termoeletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(termoeletricas)", "termoeletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Termeletrica)", "termoeletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(termeletrica)", "termoeletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Termeletricas)", "termoeletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(termeletricas)", "termoeletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Hidreletricas)", "hidreletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(hidreletricas)", "hidreletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Hidroeletricas)", "hidreletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(hidroeletricas)", "hidreletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Hidroeletricos)", "hidreletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(hidroeletricos)", "hidreletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Hidroeletrica)", "hidreletrica", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(hidroeletrica)", "hidreletrica", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Administracao)", "administracao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(administracao)", "administracao", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Administrativo)", "administracao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(administrativo)", "administracao", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Administrativos)", "administracao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(administrativos)", "administracao", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Administrativa)", "administracao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(administrativa)", "administracao", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Administrativas)", "administracao", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(administrativas)", "administracao", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Consumo)", "consumo", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Consumidores)", "consumo", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(consumidores)", "consumo", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Consumidor)", "consumo", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(consumidor)", "consumo", inFile$PEDIDO)
#inFile$PEDIDO =gsub("\\b(Consumir)", "consumo", inFile$PEDIDO)
inFile$PEDIDO =gsub("\\b(consumir)", "consumo", inFile$PEDIDO)
```


